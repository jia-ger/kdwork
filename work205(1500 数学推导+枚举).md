https://codeforces.com/contest/2155/problem/C

```c++
#include <bits/stdc++.h>
using namespace std;
#define itn int
#define icn cin
#define int long long
#define endl '\n'
typedef pair<int,int> PII;
const int N=1e5+10;
const int INF=1e18;
const int mod=998244353;
#define ll __int128

itn a[N];
int c[N];//c[i]=0/1表示镜子在右侧或左侧 
//a[i]=l[i]+r[i] l[i] 1-i镜子在左侧的人数 r[i] i-n镜子在右侧的人数 
//l[i]=l[i-1]+c[i]  r[i]=r[i+1]+(1-c[i])  r[i-1]=r[i]+(1-c[i-1])
//r[i]+l[i]=l[i-1]+r[i-1]+c[i]+c[i-1]-1
//=> a[i]=a[i-1]+c[i]+c[i-1]-1
//c[i]=a[i]-a[i-1]+1-c[i-1]  即确定c[1]则 c全部确定 所以枚举c[1]即可 
int l[N],r[N];
void solve()
{
  int n;
  cin>>n;
  memset(l,0,sizeof l);
  memset(r,0,sizeof r);
  for(itn i=1;i<=n;i++)cin>>a[i];
  int ans=0,f=1;
  
  
  c[1]=0;
  for(int i=2;i<=n;i++)
  {
   c[i]=a[i]-a[i-1]-c[i-1]+1;
   l[i]=l[i-1]+(c[i]==1);
  }
  for(int i=n;i>=1;i--)
  r[i]=r[i+1]+(1-(c[i]==1));
  for(int i=1;i<=n;i++)
  if(a[i]!=l[i]+r[i])
  {
  	f=0;break;
  }
  if(f)ans++;
  
  memset(l,0,sizeof l);
  memset(r,0,sizeof r);
  c[1]=1,l[1]=1,f=1;
  for(int i=2;i<=n;i++)
  {
   c[i]=a[i]-a[i-1]-c[i-1]+1;
   l[i]=l[i-1]+(c[i]==1);
  }
  for(int i=n;i>=1;i--)
  r[i]=r[i+1]+(1-(c[i]==1));
  for(int i=1;i<=n;i++)
  if(a[i]!=l[i]+r[i])
  {
  	f=0;break;
  }
  if(f)ans++;
  
  cout<<ans<<endl;
}



signed main(){
   cin.tie(0)->sync_with_stdio(0);	 
   int T=1; 

   cin>>T;
   while(T--)solve();
   
    return 0;
}
```
